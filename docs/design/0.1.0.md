# 0.0.1

Получение информации о сбое из [Alertmanager](https://prometheus.io/docs/alerting/alertmanager/), выступая при этом прослойкой к Slack. Конфигурация может выглядет следующим образом:

```yaml
global:
  slack_api_url: 'http://localhost:8080/v1/slack?slack_api=https://hooks.slack.com/services/AAA/BBB/CCC'
```

В поступившее [сообщение](https://api.slack.com/methods/chat.postMessage) добавляются кнопки управления `Ack` и `Resolve`, при нажатии на которых срабатывает callback в приложение и текст сообщения меняется на противоположный с добавление инициатора нажатия на Action.

Минус текущего подхода заключается в невозможности работать над самим сообщением алерта, читать его лейблы и аннотации, так как сообщение уже шаблонизировано для отправления в Slack. Плюс заключается, как ни странно, в этом же – сообщение форматировано, как того захотел его автор и содержит ссылки на другие ресурсы, которые помогают в работе над инцидентом.

При переходе на [webhook_config](https://prometheus.io/docs/alerting/configuration/#webhook_config) следует учесть используемые аннотации в алертах:

* `grafana_url`;
* `kibana_url`;
* `graylog_url`;
* `splunk_url`;
* `runbook_url`.

Все они должны быть отражены в сообщениях, которые будут формироваться уже не по пользовательскому шаблону, либо должна быть возможность использовать шаблон Alertmanager.
